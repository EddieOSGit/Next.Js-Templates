#!/usr/bin/env node
import e from"arg";import o from"prompts";import t from"degit";import{execSync as n}from"child_process";import{existsSync as s,readFileSync as r,writeFileSync as c}from"fs";import{join as i}from"path";(async function(){let l=e({"--yes":Boolean,"-y":"--yes"}),a=l._[0];a||l["--yes"]||(a=(await o({type:"text",name:"projectName",message:"What is your project named?",initial:"my-app"})).projectName),a=a||"my-app";let p=process.env.TEMPLATE_TAG||"v1.0.0-template";console.log(`
üöÄ Creating a new business website in ${a}...
`);try{s(a)&&(console.error(`‚ùå Directory ${a} already exists!`),process.exit(1));let e=t(`EddieOSGit/Next.Js-Templates#${p}`,{cache:!1,force:!0,verbose:!0});await e.clone(a),n(`rm -rf ${i(a,".git")}`,{stdio:"ignore"});let o=i(a,"package.json"),l=JSON.parse(r(o,"utf-8"));l.name=a,delete l.workspaces,c(o,JSON.stringify(l,null,2)),console.log("\nüì¶ Installing dependencies...\n"),n("npm install",{cwd:a,stdio:"inherit"}),console.log("\n‚úÖ Success! Created",a,"at",process.cwd()+"/"+a),console.log("\nInside that directory, you can run:"),console.log("\n  npm run dev"),console.log("    Starts the development server"),console.log("\n  npm run build"),console.log("    Builds the app for production"),console.log("\n  npm test"),console.log("    Runs the test suite"),console.log("\nüéâ Happy coding!"),console.log("\nüìñ See CONTRIBUTING.md for customization guide\n")}catch(e){console.error("‚ùå Error creating project:",e),process.exit(1)}})().catch(console.error);